<?xml version="1.0" encoding="UTF-8"?>
<!--
 
	NOTE: This HQL and if you add in your own query you must prefix all the field names with the table abbreviations.
	Also, you should/must use the table abbreviations that are defined in the specify_schema.xml
	
	PLEASE KEEP THEM IN ALPHABETICAL ORDER!
	
	For the search dialog boxes generated by viewdef cell@uitype="querycbx",@initialize="name=Foo", see the element typesearch@name="Foo"
 -->
<typesearches>
    <typesearch tableid="7"   name="AccessionCO"            searchfield="accessionNumber,altAccessionNumber" displaycols="accessionNumber"    format="%s"     dataobjformatter="">
        SELECT %s1 FROM Accession ac JOIN ac.division as dv WHERE dv.divisionId = DIVID AND %s2 ORDER BY accessionNumber
    </typesearch>
    <typesearch tableid="5"   name="Agent"                  searchfield="lastName"        displaycols="lastName,firstName" format="%s, %s" dataobjformatter="Agent">
        SELECT %s1 FROM Agent ag JOIN ag.disciplines as dsp WHERE dsp.disciplineId = DSPLNID AND %s2 ORDER BY ag.lastName
    </typesearch>
    <typesearch tableid="5" name="AuthorAgentByAgentVar" searchfield="av.name" displaycols="av.name,ag.dateOfBirth,ag.dateOfDeath" format="%s (%s-%s)" dataobjformatter="AuthorVarAgent">
        SELECT DISTINCT %s1 FROM Agent ag LEFT JOIN ag.variants av WHERE %s2 ORDER BY av.name, ag.dateOfBirth
   </typesearch>
    <typesearch tableid="5"   name="AgentSSPU"              searchfield="lastName"        displaycols="lastName,firstName" format="%s, %s" dataobjformatter="Agent">
        SELECT %s1 FROM Agent ag LEFT JOIN ag.specifyUser s WHERE s = null AND %s2 ORDER BY ag.lastName
    </typesearch>
    <!-- With restriction by discipline:
    <typesearch tableid="5" name="Agent"                    searchfield="av.name,av.agent.lastName" displaycols="av.name,av.agent.dateOfBirth,av.agent.dateOfDeath" format="%s (%s-%s)"     dataobjformatter="AgentVariant">
	    SELECT %s1 FROM AgentVariant av LEFT JOIN av.agent ag JOIN ag.disciplines as dsp WHERE dsp.disciplineId = DSPLNID AND %s2 ORDER BY av.name, av.agent.dateOfBirth
    </typesearch>
     -->
     <!-- Without restriction by discipline: -->
     <typesearch tableid="107" name="AgentVariant"          searchfield="av.name,av.agent.lastName" displaycols="av.name,av.agent.dateOfBirth,av.agent.dateOfDeath" format="%s (%s-%s)"     dataobjformatter="AgentVariant">
	    SELECT DISTINCT %s1 FROM AgentVariant av WHERE %s2 ORDER BY av.name, av.agent.dateOfBirth
    </typesearch>
    <typesearch tableid="67"  name="Appraisal"              searchfield="appraisalNumber" displaycols="appraisalNumber"    format="%s"     dataobjformatter=""/>
    <typesearch tableid="16"  name="AttributeDef"           searchfield="fieldName"       displaycols="fieldName"          format="%s"     dataobjformatter="">
		SELECT %s1 FROM AttributeDef atd WHERE %s2 ORDER BY atd.fieldName
    </typesearch>
    <typesearch tableid="97"  name="AutoNumberingScheme"    searchfield="schemeName"      displaycols="schemeName"         format="%s"     dataobjformatter=""/>
    <typesearch tableid="46"  name="BioStrat"               searchfield="name"            displaycols="fullName"           format="%s"     dataobjformatter="">
        SELECT %s1 FROM GeologicTimePeriod gtp JOIN gtp.definition as gtpd WHERE gtpd.geologicTimePeriodTreeDefId = GTPTREEDEFID AND gtp.isBioStrat = 1 AND %s2 ORDER BY fullName
    </typesearch>
    <typesearch tableid="63"  name="BatchPreparation"       searchfield="frag.identifier,frag.preparation.identifier" displaycols="frag.preparation.prepType.name,frag.preparation.identifier,frag.identifier" format="%s - %s (%s)"     dataobjformatter="Preparation">
		SELECT %s1 FROM Fragment frag JOIN frag.preparation as pp WHERE %s2 ORDER BY frag.identifier, frag.preparation.identifier, frag.preparation.sampleNumber
    </typesearch>
    <typesearch tableid="97"  name="CatAutoNumberingScheme" searchfield="schemeName"      displaycols="schemeName"         format="%s"     dataobjformatter=""/>
    <typesearch tableid="46"  name="ChronosStrat"           searchfield="name"            displaycols="fullName"           format="%s"     dataobjformatter=""/>
    <typesearch tableid="10"  name="CollectingEvent"        searchfield="stationFieldNumber" displaycols="stationFieldNumber,startDate,loc.localityName,geo.fullName" format="%s; %s; %s; %s" dataobjformatter="">
        SELECT %s1 FROM CollectingEvent ce LEFT JOIN ce.locality loc LEFT JOIN loc.geography geo JOIN ce.discipline as dsp WHERE dsp.disciplineId = DSPLNID AND %s2 ORDER BY stationFieldNumber
    </typesearch>
    <typesearch tableid="1"   name="CollectionObject"       searchfield="av.name"         displaycols="av.name,co.fieldNumber" format="%s %s" dataobjformatter="CollectionObject">
        SELECT %s1 FROM CollectionObject co, Collector ctr, AgentVariant av WHERE av.varType=4 AND av.agent=ctr.agent and ctr in elements(co.collectingEvent.collectors) AND %s2 ORDER BY av.name, co.fieldNumber
	</typesearch>
    <typesearch tableid="87"  name="CollectingTrip"         searchfield="collectingTripName" displaycols="collectingTripName" format="%s"  dataobjformatter=""/>
    <typesearch tableid="5"   name="CollectorAgentByAgentVar" searchfield="av.name"       displaycols="av.name,ag.dateOfBirth,ag.dateOfDeath" format="%s (%s-%s)" dataobjformatter="CollectorVarAgent">
           SELECT DISTINCT %s1 FROM Agent ag LEFT JOIN ag.variants av WHERE %s2 ORDER BY av.name, ag.dateOfBirth
    </typesearch>
    <typesearch tableid="31"  name="Container"              searchfield="name"            displaycols="name"               format="%s"     dataobjformatter=""/>
    <typesearch tableid="26"  name="Discipline"             searchfield="name"            displaycols="name"               format="%s"     dataobjformatter=""/>
    <typesearch tableid="96"  name="Division"               searchfield="name"            displaycols="name"               format="%s"     dataobjformatter=""/>
	<typesearch tableid="69"  name="Exsiccata"              searchfield="title,text1"     displaycols="text1,av.name"      format="%s %s" dataobjformatter="ReferenceWork">
		SELECT %s1 FROM ReferenceWork rw LEFT JOIN rw.authors as au with au.orderNumber=1 LEFT JOIN au.agent as ag LEFT JOIN ag.variants as av with av.varType=2 WHERE rw.referenceWorkType=6 AND %s2 ORDER BY ifnull(rw.title, rw.text1), av.name
    </typesearch>
	<typesearch tableid="85"  name="FieldNotebookPage"      searchfield="pageNumber"      displaycols="fnbp.pageNumber,fnb.name"  format="%s - %s"     dataobjformatter="FieldNotebookPage">
        SELECT %s1 FROM FieldNotebookPage fnbp JOIN fnbp.pageSet as fnbps JOIN fnbps.fieldNotebook as fnb JOIN fnb.discipline as dsp WHERE dsp.disciplineId = DSPLNID AND %s2 ORDER BY fnb.name, fnbp.pageNumber
    </typesearch>
    <typesearch tableid="142" name="Fragment"               searchfield="frag.identifier,pp.identifier,frag.description"      displaycols="frag.text1,frag.identifier,pp.identifier,frag.description" format="%s %s %s %s" dataobjformatter="Fragment">
		SELECT %s1 FROM Fragment frag LEFT JOIN frag.preparation pp WHERE %s2 ORDER BY frag.identifier, pp.identifier
	</typesearch>
    <typesearch tableid="3"   name="Geography"              searchfield="fullName"        displaycols="fullName"           format="%s"     dataobjformatter="Geography"/>
    <typesearch tableid="46"  name="GeologicTimePeriod"     searchfield="name"            displaycols="fullName"           format="%s"     dataobjformatter=""/>
    <typesearch tableid="51"  name="Journal"                searchfield="journalName"     displaycols="journalName"        format="%s"     dataobjformatter=""/>
    <typesearch tableid="100" name="LithoStrat"             searchfield="name"            displaycols="fullName"           format="%s"     dataobjformatter=""/>
    <typesearch tableid="2"   name="Locality"               searchfield="localityName"    displaycols="localityName"       format="%s"     dataobjformatter="Locality">
        SELECT %s1 FROM Locality loc JOIN loc.discipline as dsp WHERE dsp.disciplineId = DSPLNID AND %s2 ORDER BY localityName
    </typesearch>
    <typesearch tableid="143" name="LogicalContainer"       searchfield="name"            displaycols="name"               format="%s"     dataobjformatter=""/>
    <typesearch tableid="5"   name="ParentOrganization"     searchfield="ag.abbreviation,ag.lastName" displaycols="ag.abbreviation,ag.lastName" format="%s - %s"     dataobjformatter="Agent">
           SELECT distinct %s1 FROM Agent ag WHERE ag.agentType=0 AND %s2 ORDER BY ifnull(ag.abbreviation, 'z'), ag.lastName
    </typesearch>
    <typesearch tableid="5"   name="OrgByAcronym"           searchfield="ag.abbreviation,ag.lastName" displaycols="ag.abbreviation,ag.lastName" format="%s - %s"     dataobjformatter="Agent">
           SELECT distinct %s1 FROM Agent ag WHERE %s2 ORDER BY ifnull(ag.abbreviation, 'z'), ag.lastName
    </typesearch>
    <typesearch tableid="6"   name="Permit"                 searchfield="permitNumber"    displaycols="permitNumber"       format="%s"     dataobjformatter=""/>
    <typesearch tableid="63"  name="Preparation"            searchfield="frag.identifier,frag.preparation.identifier" displaycols="frag.preparation.prepType.name,frag.preparation.identifier,frag.identifier" format="%s - %s (%s)"     dataobjformatter="Preparation">
		SELECT %s1 FROM Fragment frag JOIN frag.preparation as pp WHERE %s2 ORDER BY frag.identifier, frag.preparation.identifier, frag.preparation.sampleNumber
    </typesearch>
    <typesearch tableid="65"  name="PrepType"               searchfield="name"            displaycols="name"               format="%s"     dataobjformatter=""/>
	<typesearch tableid="66"  name="Project"                searchfield="name"            displaycols="name"               format="%s"     dataobjformatter=""/>
    <typesearch tableid="69"  name="ReferenceWork"          searchfield="title,text1"     displaycols="text1,av.name"      format="%s %s" dataobjformatter="ReferenceWork">
		SELECT %s1 FROM ReferenceWork rw LEFT JOIN rw.authors as au with au.orderNumber=1 LEFT JOIN au.agent as ag LEFT JOIN ag.variants as av with av.varType=2 WHERE %s2 ORDER BY ifnull(rw.title, rw.text1), av.name
    </typesearch>
    <typesearch tableid="69"  name="RefWorkTaxCitSub"       searchfield="ref.containedRFParent.title" displaycols="ref.containedRFParent.title"  format="%s"     dataobjformatter="ReferenceWork"/>
    <typesearch tableid="70"  name="RepositoryAgreement"    searchfield="repositoryAgreementNumber" displaycols="repositoryAgreementNumber" format="%s"     dataobjformatter=""/>
    <typesearch tableid="58"  name="Storage"                searchfield="name,text1"      displaycols="fullName,text1"     format="%s.  %s" dataobjformatter="Storage"/>
    <typesearch tableid="4"   name="Taxon"                  searchfield="fullName"        displaycols="fullName,author,groupNumber"    format="%s %s %s"   dataobjformatter="Taxon"/>
    <typesearch tableid="107" name="TaxonAuthor"            searchfield="name"            displaycols="name"               format="%s"      dataobjformatter="AgentVariant">
	    SELECT DISTINCT %s1 FROM AgentVariant av WHERE av.varType = 3 AND %s2 ORDER BY name
    </typesearch>
    <typesearch tableid="77"  name="TaxonTreeDefItem"       searchfield="name"            displaycols="name"               format="%s"     dataobjformatter=""/>
    <typesearch tableid="5"   name="TransactionAgent"       searchfield="org.abbreviation,ag.abbreviation" displaycols="ag.abbreviation,ag.firstName,ag.lastName" format="%s %s %s"     dataobjformatter="Agent">
           SELECT distinct %s1 FROM Agent ag LEFT JOIN ag.organization as org WHERE %s2 ORDER BY ifnull(ag.abbreviation, org.abbreviation), ifnull(org.abbreviation, 'a'), ag.lastName
    </typesearch>
    <typesearch tableid="63"  name="BarcodedPreparation"  searchfield="frag.identifier,frag.preparation.identifier" displaycols="frag.preparation.prepType.name,frag.preparation.identifier,frag.identifier" format="%s - %s (%s)"     dataobjformatter="Preparation">
		SELECT %s1 FROM Fragment frag JOIN frag.preparation as pp WHERE %s2 ORDER BY frag.identifier, frag.preparation.identifier, frag.preparation.sampleNumber
    </typesearch>
</typesearches>
