<?xml version="1.0" encoding="UTF-8"?>
<!-- 

  Last Id for ExpressSearch 63
  Last Id for Other Search  133

 -->
<searches>
    <!-- ************************************** -->
    <!--      These are for Express Search      -->
    <!-- ************************************** -->
    <express>
        
        <!-- Return agent records found by previous search on agentvariant -->
        <table id="1" tableid="5" name="BotanistsByBotanistName" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="107">av.AgentVariantID</join>
            </joins>
            <detailView icon="Agent">
                <sql>
                    <![CDATA[
 SELECT
 ag.AgentID,
 av.Name,
 ag.DateOfBirth,
 ag.DateOfBirthPrecision,
 ag.DateOfDeath,
 ag.DateOfDeathPrecision,
 ag.DatesType,
 agsp.SpecialtyName,
 %s 
 FROM agent ag INNER JOIN agent_discipline ON ag.AgentID = agent_discipline.AgentID
 JOIN agentvariant av ON ag.AgentID = av.AgentID
 LEFT JOIN agentspecialty agsp ON ag.AgentID = agsp.AgentID
 WHERE %s
 ORDER BY ag.AgentID, av.Name, agsp.Role, agsp.OrderNumber]]>
                </sql>
                <captions>
                    <caption tableid="5" col="ag.AgentID" visible="false"/>
                    <caption tableid="107" key="Collector">
                    	<agg class="edu.ku.brc.specify.datamodel.AgentVariant" aggregator="AgentVariant"/>
                    	<col name="av.Name" field="name"/>
                    </caption>
    				<caption tableid="5" formatter="PartialDate">
    					<col name="ag.DateOfBirth" field="dateOfBirth"/>
                    	<col name="ag.DateOfBirthPrecision" field="dateOfBirthPrecision"/>
                    </caption>
                    <caption tableid="5" formatter="PartialDate">
    					<col name="ag.DateOfDeath" field="dateOfDeath"/>
                    	<col name="ag.DateOfDeathPrecision" field="dateOfDeathPrecision"/>
                    </caption>
                    <caption tableid="5" col="ag.DatesType" field="datesType" formatter="AgentDatesType"/>
                    <caption tableid="86" key="AgentSpecialties">
                    	<agg class="edu.ku.brc.specify.datamodel.AgentSpecialty" aggregator="AgentSpecialty"/>
                    	<col name="agsp.SpecialtyName" field="specialtyName"/>
                    </caption>
                </captions>
            </detailView>
        </table>
        
        <table id="2" tableid="1" name="CollObjectsByAccession" priority="1" color="30, 144, 144">
        	<joins>
            	<join tableid="7">ac.AccessionID</join>
            </joins>
            <detailView icon="CollectionObject">
                <sql>
                    <![CDATA[
 SELECT
 co.CollectionObjectID,
 ac.AccessionNumber,
 frag.Identifier,
 ce.StartDate,
 ce.StartDatePrecision,
 av.Name,
 ce.StationFieldNumber,
 %s
 FROM collectionobject co
 LEFT JOIN collectingevent ce ON co.CollectingEventID = ce.CollectingEventID
 LEFT JOIN collector ctr ON ce.CollectingEventID = ctr.CollectingEventID
 LEFT JOIN agent ag ON ctr.AgentID = ag.AgentID
 LEFT JOIN agentvariant av ON (ag.AgentID = av.AgentID AND av.VarType="4")
 JOIN fragment frag ON co.CollectionObjectID = frag.CollectionObjectID
 JOIN accessionpreparation ap ON frag.PreparationID = ap.PreparationID
 JOIN accession ac ON ap.AccessionID ac.AccessionID
 WHERE %s
 ORDER BY ac.AccessionNumber, cp.PreparationID, frag.CollectionObjectID, ctr.AgentID, av.AgentID, av.Name, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="1" col="co.CollectionObjectID" visible="false"/>
                    <caption tableid="7" col="ac.AccessionNumber" field="accessionNumber" formatter="HUHAccessionNumber"/>
                    <caption tableid="142" key="Fragments">
                    	<agg class="edu.ku.brc.specify.datamodel.Fragment" aggregator="Fragment"/>
						<col name="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    </caption>
                    <caption tableid="10" formatter="PartialDate">
                        <col name="ce.StartDate"          field="startDate"/>
                        <col name="ce.StartDatePrecision" field="startDatePrecision"/>
                    </caption>
                    <caption tableid="107" key="Collector">
                    	<agg class="edu.ku.brc.specify.datamodel.AgentVariant" aggregator="AgentVariant"/>
                    	<col name="av.Name" field="name"/>
                    </caption>
                    <caption tableid="10" col="ce.StationFieldNumber" field="stationFieldNumber"/>
               </captions>
            </detailView>
        </table>
        
        <table id="3" tableid="1" name="CollObjectsByBarcode" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="142">frag.FragmentID</join>
                <join tableid="63">pp.PreparationID</join>
            </joins>
            <detailView icon="CollectionObject">
                <sql>
                    <![CDATA[
 SELECT
 co.CollectionObjectID,
 frag.Identifier,
 ce.StartDate,
 ce.StartDatePrecision,
 av.Name,
 ce.StationFieldNumber,
 %s
 FROM collectionobject co
 LEFT JOIN collectingevent ce ON co.CollectingEventID = ce.CollectingEventID
 LEFT JOIN collector ctr ON ce.CollectingEventID = ctr.CollectingEventID
 LEFT JOIN agent ag ON ctr.AgentID = ag.AgentID
 LEFT JOIN agentvariant av ON (ag.AgentID = av.AgentID AND av.VarType=4)
 JOIN fragment frag ON co.CollectionObjectID = frag.CollectionObjectID
 LEFT JOIN preparation pp ON frag.PreparationID = pp.PreparationID
 WHERE %s
 ORDER BY ifnull(frag.Identifier, pp.Identifier), frag.CollectionObjectID, ctr.AgentID, av.AgentID, av.Name]]>
                </sql>
                <captions>
                    <caption tableid="1"   col="co.CollectionObjectID" visible="false"/>
                    <caption tableid="142" key="Fragments">
                    	<agg class="edu.ku.brc.specify.datamodel.Fragment" aggregator="Fragment"/>
						<col name="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    </caption>
                    <caption tableid="10" formatter="PartialDate">
                        <col name="ce.StartDate"          field="startDate"/>
                        <col name="ce.StartDatePrecision" field="startDatePrecision"/>
                    </caption>
                    <caption tableid="107" key="Collector">
                    	<agg class="edu.ku.brc.specify.datamodel.AgentVariant" aggregator="AgentVariant"/>
                    	<col name="av.Name" field="name"/>
                    </caption>
                    <caption tableid="10" col="ce.StationFieldNumber" field="stationFieldNumber"/>
               </captions>
            </detailView>
        </table>
        
        <table id="4" tableid="1" name="CollObjectsByCitation" priority="1" color="30, 144, 144">
        	<joins>
                <join tableid="69">rw.ReferenceWorkID</join>
                <join tableid="107">rwv.ReferenceWorkID</join>
            </joins>
            <detailView icon="CollectionObject">
                <sql>
                    <![CDATA[
 SELECT
 co.CollectionObjectID,
 rw.Title,
 frag.Identifier,
 ce.StartDate,
 ce.StartDatePrecision,
 ce.StationFieldNumber,
 av.Name,
 %s
 FROM collectionobject co
 JOIN fragment frag ON co.CollectionObjectID = frag.CollectionObjectID
 JOIN fragmentcitation fc ON frag.FragmentID = fc.FragmentID
 JOIN referencework rw ON fc.ReferenceWorkID = rw.ReferenceWorkID
 LEFT JOIN referenceworkvariant rwv ON rw.ReferenceWorkID = rwv.ReferenceWorkID
 LEFT JOIN collectingevent ce ON co.CollectingEventID = ce.CollectingEventID
 LEFT JOIN collector ctr ON ce.CollectingEventID = ctr.CollectingEventID
 LEFT JOIN agent ag ON ctr.AgentID = ag.AgentID
 LEFT JOIN agentvariant av ON (ag.AgentID = av.AgentID AND av.VarType="4")
 WHERE %s
 ORDER BY rw.Title, frag.CollectionObjectID, ctr.AgentID, av.AgentID, av.Name, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="1"  col="co.CollectionObjectID" visible="false"/>
                    <caption tableid="69" col="rw.Title"/>
                    <caption tableid="142" key="Fragments">
                    	<agg class="edu.ku.brc.specify.datamodel.Fragment" aggregator="Fragment"/>
						<col name="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    </caption>
                    <caption tableid="10" formatter="PartialDate">
                        <col name="ce.StartDate"          field="startDate"/>
                        <col name="ce.StartDatePrecision" field="startDatePrecision"/>
                    </caption>
                    <caption tableid="107" key="Collector">
                    	<agg class="edu.ku.brc.specify.datamodel.AgentVariant" aggregator="AgentVariant"/>
                    	<col name="av.Name" field="name"/>
                    </caption>
                    <caption tableid="10" col="ce.StationFieldNumber" field="stationFieldNumber"/>
               </captions>
            </detailView>
        </table>
        
         <table id="5" tableid="1" name="CollObjectsByCollector" priority="1" color="30, 144, 144">
        	<joins>
                <join tableid="107">av.AgentID</join>
            </joins>
            <detailView icon="CollectionObject">
                <sql>
                    <![CDATA[
 SELECT
 co.CollectionObjectID,
 frag.Identifier,
 ce.StartDate,
 ce.StartDatePrecision,
 ce.StationFieldNumber,
 av.Name,
 %s
 FROM collectionobject co
 JOIN fragment frag on co.CollectionObjectID = frag.CollectionObjectID
 JOIN collectingevent ce ON co.CollectingEventID = ce.CollectingEventID
 JOIN collector ctr ON ce.CollectingEventID = ctr.CollectingEventID
 JOIN agent ag ON ctr.AgentID = ag.AgentID
 LEFT JOIN agentvariant av ON (ag.AgentID = av.AgentID AND av.VarType="4")
 WHERE %s
 ORDER BY ctr.AgentID, av.AgentID, av.Name, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="1"  col="co.CollectionObjectID" visible="false"/>
                    <caption tableid="142" key="Fragments">
                    	<agg class="edu.ku.brc.specify.datamodel.Fragment" aggregator="Fragment"/>
						<col name="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    </caption>
                    <caption tableid="10" formatter="PartialDate">
                        <col name="ce.StartDate"          field="startDate"/>
                        <col name="ce.StartDatePrecision" field="startDatePrecision"/>
                    </caption>
                    <caption tableid="107" key="Collector">
                    	<agg class="edu.ku.brc.specify.datamodel.AgentVariant" aggregator="AgentVariant"/>
                    	<col name="av.Name" field="name"/>
                    </caption>
                    <caption tableid="10" col="ce.StationFieldNumber" field="stationFieldNumber"/>
               </captions>
            </detailView>
        </table>
        
        <table id="6" tableid="1" name="CollObjectsByDetermination" priority="1" color="30, 144, 144">
        	<joins>
                <join tableid="4">tx.TaxonID</join>
            </joins>
            <detailView icon="CollectionObject">
                <sql>
                    <![CDATA[
 SELECT
 co.CollectionObjectID,
 tx.FullName,
 frag.Identifier,
 ce.StartDate,
 ce.StartDatePrecision,
 ce.StationFieldNumber,
 av.Name,
 %s
 FROM collectionobject co
 JOIN fragment frag ON co.CollectionObjectID = frag.CollectionObjectID
 JOIN determination det ON frag.FragmentID = det.FragmentID
 JOIN taxon tx ON det.TaxonID = tx.TaxonID
 LEFT JOIN collectingevent ce ON co.CollectingEventID = ce.CollectingEventID
 LEFT JOIN collector ctr ON ce.CollectingEventID = ctr.CollectingEventID
 LEFT JOIN agent ag ON ctr.AgentID = ag.AgentID
 LEFT JOIN agentvariant av ON (ag.AgentID = av.AgentID AND av.VarType="4")
 WHERE %s
 ORDER BY tx.FullName, frag.CollectionObjectID, ctr.AgentID, av.AgentID, av.Name, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="1" col="co.CollectionObjectID" visible="false"/>
                    <caption tableid="4" col="tx.FullName"/>
                    <caption tableid="142" key="Fragments">
                    	<agg class="edu.ku.brc.specify.datamodel.Fragment" aggregator="Fragment"/>
						<col name="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    </caption>
                    <caption tableid="10" formatter="PartialDate">
                        <col name="ce.StartDate"          field="startDate"/>
                        <col name="ce.StartDatePrecision" field="startDatePrecision"/>
                    </caption>
                    <caption tableid="107" key="Collector">
                    	<agg class="edu.ku.brc.specify.datamodel.AgentVariant" aggregator="AgentVariant"/>
                    	<col name="av.Name" field="name"/>
                    </caption>
                    <caption tableid="10" col="ce.StationFieldNumber" field="stationFieldNumber"/>
               </captions>
            </detailView>
        </table>
        
        <table id="7" tableid="1" name="CollObjectsByLoan" priority="1" color="30, 144, 144">
        	<joins>
            	<join tableid="52">ln.LoanID</join>
            </joins>
            <detailView icon="CollectionObject">
                <sql>
                    <![CDATA[
 SELECT
 co.CollectionObjectID,
 ln.LoanNumber,
 frag.Identifier,
 ce.StartDate,
 ce.StartDatePrecision,
 av.Name,
 ce.StationFieldNumber,
 %s
 FROM collectionobject co
 LEFT JOIN collectingevent ce ON co.CollectingEventID = ce.CollectingEventID
 LEFT JOIN collector ctr ON ce.CollectingEventID = ctr.CollectingEventID
 LEFT JOIN agent ag ON ctr.AgentID = ag.AgentID
 LEFT JOIN agentvariant av ON (ag.AgentID = av.AgentID AND av.VarType="4")
 JOIN fragment frag ON co.CollectionObjectID = frag.CollectionObjectID
 JOIN preparation pp ON frag.PreparationID = pp.PreparationID
 JOIN loanpreparation lpo ON pp.PreparationID = lpo.PreparationID
 JOIN loan ln ON lpo.LoanID = ln.LoanID
 WHERE %s
 ORDER BY ln.LoanNumber, lpo.PreparationID, frag.CollectionObjectID, ctr.AgentID, av.AgentID, av.Name, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="1" col="co.CollectionObjectID" visible="false"/>
                    <caption tableid="52" col="ln.LoanNumber" formatter="HUHLoanNumber"/>
                    <caption tableid="142" key="Fragments">
                    	<agg class="edu.ku.brc.specify.datamodel.Fragment" aggregator="Fragment"/>
						<col name="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    </caption>
                    <caption tableid="10" formatter="PartialDate">
                        <col name="ce.StartDate"          field="startDate"/>
                        <col name="ce.StartDatePrecision" field="startDatePrecision"/>
                    </caption>
                    <caption tableid="107" key="Collector">
                    	<agg class="edu.ku.brc.specify.datamodel.AgentVariant" aggregator="AgentVariant"/>
                    	<col name="av.Name" field="name"/>
                    </caption>
                    <caption tableid="10" col="ce.StationFieldNumber" field="stationFieldNumber"/>
               </captions>
            </detailView>
        </table>
        
        <table id="8" tableid="142" name="ItemsByAccession" priority="1" color="30, 144, 144">
        	<joins>
            	<join tableid="7">ac.AccessionID</join>
            </joins>
            <detailView icon="Fragment">
                <sql>
                    <![CDATA[
 SELECT
 frag.FragmentID,
 ac.AccessionNumber,
 frag.Identifier,
 %s
 FROM fragment frag
 JOIN accessionpreparation ap ON frag.PreparationID = ap.PreparationID
 JOIN accession ac ON ap.AccessionID = ac.AccessionID
 WHERE %s
 ORDER BY ac.AccessionNumber, ap.PreparationID, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="142" col="frag.FragmentID" visible="false"/>
                    <caption tableid="7"   col="accession.AccessionNumber"/>
                    <caption tableid="142" key="Fragments">
                    	<agg class="edu.ku.brc.specify.datamodel.Fragment" aggregator="Fragment"/>
						<col name="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    </caption>
               </captions>
            </detailView>
        </table>
        
        <table id="9" tableid="142" name="ItemsByPrep" priority="1" color="30, 144, 144">
        	<joins>
            	<join tableid="63">pp.PreparationID</join>
            </joins>
            <detailView icon="Fragment">
                <sql>
                    <![CDATA[
 SELECT
 frag.FragmentID,
 frag.Identifier,
 frag.PrepMethod,
 pp.Identifier,
 frag.Description,
 %s
 FROM fragment frag
 JOIN preparation pp ON frag.PreparationID = pp.PreparationID
 WHERE %s
 ORDER BY frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="142" col="frag.FragmentID" visible="false"/>
                    <caption tableid="142" col="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    <caption tableid="142" col="frag.PrepMethod" field="prepMethod"/>
                    <caption tableid="63"  col="pp.Identifier"   field="identifier" formatter="HUHPreparationBarcode"/>
                    <caption tableid="142" col="frag.Description" field="description"/>
               </captions>
            </detailView>
        </table>
        
        <table id="10" tableid="142" name="ItemsByCollector" priority="1" color="30, 144, 144">
        	<joins>
                <join tableid="107">av.AgentID</join>
            </joins>
            <detailView icon="CollectionObject">
                <sql>
                    <![CDATA[
 SELECT
 frag.FragmentID,
 frag.Identifier,
 av.Name,
 %s
 FROM fragment frag
 JOIN collectionobject co ON frag.CollectionObjectID = co.CollectionObjectID
 JOIN collectingevent ce ON co.CollectingEventID = ce.CollectingEventID
 JOIN collector ctr ON ce.CollectingEventID = ctr.CollectingEventID
 JOIN agent ag ON ctr.AgentID = ag.AgentID
 LEFT JOIN agentvariant av ON (ag.AgentID = av.AgentID AND av.VarType="4")
 WHERE %s
 ORDER BY av.AgentID, av.Name, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="142" col="frag.FragmentID" visible="false"/>
                    <caption tableid="107" key="Collector">
                    	<agg class="edu.ku.brc.specify.datamodel.AgentVariant" aggregator="AgentVariant"/>
                    	<col name="av.Name" field="name"/>
                    </caption>
                    <caption tableid="142" col="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
               </captions>
            </detailView>
        </table>
        
        <table id="11" tableid="142" name="ItemsByCitation" priority="1" color="30, 144, 144">
        	<joins>
                <join tableid="69">rw.ReferenceWorkID</join>
                <join tableid="107">rwv.ReferenceWorkID</join>
            </joins>
            <detailView icon="CollectionObject">
                <sql>
                    <![CDATA[
 SELECT
 frag.FragmentID,
 rw.Title,
 frag.Identifier,
 %s
 FROM fragment frag
 JOIN fragmentcitation fc ON frag.FragmentID = fc.FragmentID
 JOIN referencework rw ON fc.ReferenceWorkID = rw.ReferenceWorkID
 LEFT JOIN referenceworkvariant rwv ON rw.ReferenceWorkID = rwv.ReferenceWorkID
 WHERE %s
 ORDER BY rw.Title, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="142" col="frag.FragmentID" visible="false"/>
                    <caption tableid="69"  col="rw.Title"/>
                    <caption tableid="142" col="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
               </captions>
            </detailView>
        </table>
        
        <table id="12" tableid="142" name="ItemsByDetermination" priority="1" color="30, 144, 144">
        	<joins>
                <join tableid="4">tx.TaxonID</join>
            </joins>
            <detailView icon="Fragment">
                <sql>
                    <![CDATA[
 SELECT
 frag.FragmentID,
 tx.FullName,
 frag.Identifier,
 %s
 FROM fragment frag
 JOIN determination det ON frag.FragmentID = det.FragmentID
 JOIN taxon tx ON det.TaxonID = tx.TaxonID
 WHERE %s
 ORDER BY tx.FullName, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="142" col="frag.FragmentID" visible="false"/>
                    <caption tableid="4"   col="tx.FullName"/>
                    <caption tableid="142" col="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
               </captions>
            </detailView>
        </table>
        
        <table id="13" tableid="142" name="ItemsByLoan" priority="1" color="30, 144, 144">
        	<joins>
            	<join tableid="52">ln.LoanID</join>
            </joins>
            <detailView icon="Fragment">
                <sql>
                    <![CDATA[
 SELECT
 frag.FragmentID,
 ln.LoanNumber,
 ppt.Name,
 frag.Identifier,
 %s
 FROM fragment frag
 JOIN loanpreparation lpo ON frag.PreparationID = lpo.PreparationID
 JOIN loan ln ON lpo.LoanID = ln.LoanID
 LEFT JOIN preparation pp on frag.PreparationID = pp.PreparationID
 LEFT JOIN preptype ppt on pp.PrepTypeID = ppt.PrepTypeID
 WHERE %s
 ORDER BY ln.LoanNumber, lpo.PreparationID, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="142" col="frag.FragmentID" visible="false"/>
                    <caption tableid="52"  col="ln.LoanNumber" formatter="HUHLoanNumber"/>
                    <caption tableid="65"  col="ppt.Name"/>
                    <caption tableid="142" col="frag.Identifier" formatter="HUHFragmentBarcode"/>
               </captions>
            </detailView>
        </table>
       
       <table id="31" tableid="52" name="LoansByAgent" priority="1" color="30, 144, 144">
        	<joins>
        		<join tableid="5">ag.AgentID</join>
        	</joins>
        	<detailView icon="Loan">
        		<sql>
        			<![CDATA[
 SELECT
 ln.LoanID,
 ag.Abbreviation,
 ag.LastName,
 lna.Role,
 ln.LoanNumber,
 ln.LoanDate,
 ln.DateClosed,
 %s
 FROM loan ln
 JOIN loanagent lna ON ln.LoanID = lna.LoanID
 JOIN agent ag ON lna.AgentID = ag.AgentID
 WHERE %s
 ORDER BY ifnull(ag.Abbreviation, ag.LastName), ln.LoanNumber]]>
        		</sql>
        		<captions>
                    <caption tableid="52" col="ln.LoanID" visible="false"/>
                    <caption tableid="5"  col="ag.Abbreviation" field="abbreviation"/>
                    <caption tableid="5"  col="ag.LastName"     field="lastName"/>
                    <caption tableid="53" col="ag.Role"         field="role"/>
                    <caption tableid="52" col="ln.LoanNumber"   field="loanNumber" formatter="HUHLoanNumber"/>
                    <caption tableid="52" col="ln.LoanDate"     field="loanDate"   formatter="Date"/>
                    <caption tableid="52" col="ln.DateClosed"   field="dateClosed" formatter="Date"/>
               </captions>
        	</detailView>
       </table>
       
       <table id="32" tableid="52" name="LoansByBarcode" priority="1" color="30, 144, 144">
       		<joins>
        		<join tableid="142">frag.FragmentID</join>
                <join tableid="63">pp.PreparationID</join>
        	</joins>
        	<detailView icon="Loan">
        		<sql>
        			<![CDATA[
 SELECT
 ln.LoanID,
 frag.Identifier,
 ln.LoanDate,
 ln.DateClosed,
 %s
 FROM loan ln
 JOIN loanpreparation lpo ON ln.LoanID = lpo.LoanID
 JOIN preparation pp ON lpo.PreparationID = pp.PreparationID
 LEFT JOIN fragment frag ON pp.PreparationID = frag.PreparationID
 WHERE %s
 ORDER BY ifnull(ag.Abbreviation, ag.LastName), ln.LoanNumber]]>
        		</sql>
        		<captions>
                    <caption tableid="52"  col="ln.LoanID" visible="false"/>
                    <caption tableid="142" col="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    <caption tableid="52"  col="ln.LoanNumber"   field="loanNumber" formatter="HUHLoanNumber"/>
                    <caption tableid="52"  col="ln.LoanDate"     field="loanDate"   formatter="Date"/>
                    <caption tableid="52"  col="ln.DateClosed"   field="dateClosed" formatter="Date"/>
               </captions>
        	</detailView>
       </table>
       
       <table id="33" tableid="52" name="LoansByTaxon" priority="1" color="30, 144, 144">
       		<joins>
        		<join tableid="4">tx.TaxonID</join>
        	</joins>
        	<detailView icon="Loan">
        		<sql>
        			<![CDATA[
 SELECT
 ln.LoanID,
 frag.Identifier,
 ln.LoanDate,
 ln.DateClosed,
 %s
 FROM loan ln
 JOIN loanpreparation lpo ON ln.LoanID = lpo.LoanID
 LEFT JOIN preparation pp ON lpo.PreparationID = pp.PreparationID
 LEFT JOIN fragment frag ON pp.PreparationID = frag.PreparationID
 LEFT JOIN determination det ON frag.FragmentID = det.FragmentID
 JOIN taxon tx ON (det.TaxonID = tx.TaxonID OR pp.TaxonID = tx.TaxonID)
 WHERE %s
 ORDER BY tx.FullName, lpo.LoanPreparationID, frag.Identifier]]>
        		</sql>
        		<captions>
                    <caption tableid="52" col="ln.LoanID" visible="false"/>
                    <caption tableid="4"  col="tx.FullName" field="fullName"/>
                    <caption tableid="142" key="Fragments">
						<agg class="edu.ku.brc.specify.datamodel.Fragment" aggregator="Fragment"/>
						<col name="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    </caption>
                    <caption tableid="52" col="ln.LoanNumber"   field="loanNumber" formatter="HUHLoanNumber"/>
                    <caption tableid="52" col="ln.LoanDate"     field="loanDate"   formatter="Date"/>
                    <caption tableid="52" col="ln.DateClosed"   field="dateClosed" formatter="Date"/>
               </captions>
        	</detailView>
       </table>
       
       <table id="34" tableid="63" name="PrepsByAccession" priority="1" color="30, 144, 144">
        	<joins>
            	<join tableid="7">ac.AccessionID</join>
            </joins>
            <detailView icon="Preparation">
                <sql>
                    <![CDATA[
 SELECT
 pp.PreparationID,
 ac.AccessionNumber,
 frag.Identifier,
 %s
 FROM preparation pp
 JOIN accessionpreparation ap ON pp.PreparationID = ap.PreparationID
 LEFT JOIN fragment frag ON pp.PreparationID = frag.PreparationID
 WHERE %s
 ORDER BY ac.AccessionNumber, acp.PreparationID, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="63" col="pp.PreparationID" visible="false"/>
                    <caption tableid="7"  col="ac.AccessionNumber" field="accessionNumber" formatter="HUHAccessionNumber"/>
                    <caption tableid="142" key="Fragments">
                    	<agg class="edu.ku.brc.specify.datamodel.Fragment" aggregator="Fragment"/>
						<col name="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    </caption>
               </captions>
            </detailView>
        </table>
        
        <table id="35" tableid="63" name="PrepsByItem" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="142">frag.FragmentID</join>
            </joins>
            <detailView icon="Preparation">
                <sql>
                    <![CDATA[
 SELECT
 pp.PreparationID,
 ppt.Name,
 frag.Identifier,
 %s
 FROM preparation pp
 JOIN preptype ppt ON pp.PrepTypeID = ppt.PrepTypeID
 JOIN fragment frag ON pp.PreparationID = frag.PreparationID
 WHERE %s
 ORDER BY frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="63"  col="pp.PreparationID" visible="false"/>
                    <caption tableid="65"  col="ppt.Name" field="Name"/>
                    <caption tableid="142" col="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
               </captions>
            </detailView>
        </table>
        
        <table id="36" tableid="63" name="PrepsByCitation" priority="1" color="30, 144, 144">
        	<joins>
                <join tableid="69">rw.ReferenceWorkID</join>
                <join tableid="107">rwv.ReferenceWorkID</join>
            </joins>
            <detailView icon="Preparation">
                <sql>
                    <![CDATA[
 SELECT
 pp.PreparationID,
 rw.Title,
 ppt.Name,
 frag.Identifier,
 %s
 FROM preparation pp
 JOIN preptype ppt ON pp.PrepTypeID = ppt.PrepTypeID
 JOIN fragment frag ON pp.PreparationID = frag.PreparationID
 JOIN fragmentcitation fc ON frag.FragmentID = fc.FragmentID
 JOIN referencework rw ON fc.ReferenceWorkID = rw.ReferenceWorkID
 LEFT JOIN referenceworkvariant rwv ON rw.ReferenceWorkID = rwv.ReferenceWorkID
 WHERE %s
 ORDER BY rw.Title, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="63"  col="pp.PreparationID" visible="false"/>
                    <caption tableid="69"  col="rw.Title"/>
                    <caption tableid="142" col="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
               </captions>
            </detailView>
        </table>
        
         <table id="37" tableid="63" name="PrepsByCollector" priority="1" color="30, 144, 144">
        	<joins>
                <join tableid="107">av.AgentID</join>
            </joins>
            <detailView icon="Preparation">
                <sql>
                    <![CDATA[
 SELECT
 pp.PreparationID, 
 av.Name,
 frag.Identifier,
 %s 
 FROM preparation pp
 JOIN fragment frag ON pp.PreparationID = frag.PreparationID
 JOIN collectionobject co ON frag.CollectionObjectID = co.CollectionObjectID
 JOIN collectingevent ce ON co.CollectingEventID = ce.CollectingEventID
 JOIN collector ctr ON ce.CollectingEventID = ctr.CollectingEventID
 JOIN agent ag ON ctr.AgentID = ag.AgentID
 LEFT JOIN agentvariant av ON (ag.AgentID = av.AgentID AND av.VarType="4")
 WHERE %s
 ORDER BY ctr.AgentID, av.Name, frag.PreparationID, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="63" col="pp.PreparationID" visible="false"/>
                    <caption tableid="107" key="Collector">
                    	<agg class="edu.ku.brc.specify.datamodel.AgentVariant" aggregator="AgentVariant"/>
                    	<col name="av.Name" field="name"/>
                    </caption>
                    <caption tableid="142" key="Fragments">
						<agg class="edu.ku.brc.specify.datamodel.Fragment" aggregator="Fragment"/>
						<col name="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    </caption>
               </captions>
            </detailView>
        </table>
        
        <table id="38" tableid="63" name="PrepsByDetermination" priority="1" color="30, 144, 144">
        	<joins>
            	<join tableid="4">tx.TaxonID</join>
            </joins>
            <detailView icon="Preparation">
                <sql>
                    <![CDATA[
 SELECT DISTINCT
 pp.PreparationID,
 tx.FullName,
 frag.Identifier,
 %s
 FROM preparation pp
 JOIN fragment frag ON pp.PreparationID = frag.PreparationID
 JOIN determination det ON frag.FragmentID = det.FragmentID
 JOIN taxon tx ON det.TaxonID = tx.TaxonID
 WHERE %s
 ORDER BY tx.FullName, frag.PreparationID, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="63"  col="pp.PreparationID" visible="false"/>
                    <caption tableid="4"   col="tx.FullName" field="fullName"/>
                    <caption tableid="142" col="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
               </captions>
            </detailView>
        </table>
        
        <table id="39" tableid="63" name="PrepsByLoan" priority="1" color="30, 144, 144">
        	<joins>
            	<join tableid="52">ln.LoanID</join>
            </joins>
            <detailView icon="Preparation">
                <sql>
                    <![CDATA[
 SELECT
 pp.PreparationID,
 ln.LoanNumber,
 ppt.Name,
 frag.Identifier,
 %s 
 FROM preparation pp
 JOIN preptype ppt ON pp.PrepTypeID = ppt.PrepTypeID
 JOIN loanpreparation lpo ON pp.PreparationID = lpo.PreparationID
 JOIN loan ln on lpo.LoanID = ln.LoanID
 LEFT JOIN fragment frag ON pp.PreparationID=frag.PreparationID
 WHERE %s
 ORDER BY ln.LoanID, lpo.PreparationID, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="63" col="pp.PreparationID" visible="false"/>
                    <caption tableid="52" col="ln.LoanNumber" field="loanNumber" formatter="HUHLoanNumber"/>
                    <caption tableid="65" col="ppt.Name" field="name"/>
                    <caption tableid="142" key="Fragments">
						<agg class="edu.ku.brc.specify.datamodel.Fragment" aggregator="Fragment"/>
						<col name="frag.Identifier" field="identifier" formatter="HUHFragmentBarcode"/>
                    </caption>
               </captions>
            </detailView>
        </table>
       
       <table id="40" tableid="69" name="RefWorksByRefWorkIdentifier" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="140">rwi.ReferenceWorkIdentifierID</join>
            </joins>
            <detailView icon="ReferenceWork">
                <sql>
                    <![CDATA[
 SELECT rw.ReferenceWorkID, 
 rwv.Name, 
 rw.Text1, 
 %s 
 FROM referencework rw
 INNER JOIN referenceworkidentifier rwi ON rw.ReferenceWorkID = rwi.ReferenceWorkID 
 WHERE %s ORDER BY rwi.Identifier, rw.Text1]]>
                </sql>
                <captions>
                    <caption tableid="69"  col="rw.ReferenceWorkID" visible="false"/>
                    <caption tableid="140" col="rwi.Identifier" field="identifier"/>
                    <caption tableid="69"  col="rw.Text1"       field="text1"/>                    
                </captions>
            </detailView>
        </table>
        
		<table id="41" tableid="69" name="RefWorksByVariantTitle" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="141">rwv.ReferenceWorkVariantID</join>
            </joins>
            <detailView icon="ReferenceWork">
                <sql>
                    <![CDATA[
 SELECT
 rw.ReferenceWorkID, 
 rwv.Name, 
 rw.Text1, 
 %s 
 FROM referencework rw
 INNER JOIN referenceworkvariant rwv ON rw.ReferenceWorkID = rwv.ReferenceWorkID 
 WHERE %s ORDER BY rwv.Name]]>
                </sql>
                <captions>
                    <caption tableid="69"  col="rw.ReferenceWorkID" visible="false"/>
                    <caption tableid="141" col="rwv.Name" field="name"/>
                    <caption tableid="69"  col="rw.Text1" field="text1"/>
                </captions>
            </detailView>
        </table>


        
        <!-- ============================ -->
        <!--  Attachment Related Searches -->
        <!-- ============================ -->
        
        <table id="14" tableid="7" indexed="false" name="Acc2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="7" primary="true">accession.AccessionID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="Accession">
                <sql>
                    <![CDATA[SELECT 
  accession.AccessionID, 
  accession.AccessionNumber, 
  attachment.Title, 
  %s 
  FROM accession INNER JOIN accessionattachment ON accession.AccessionID = accessionattachment.AccessionID 
  INNER JOIN attachment ON accessionattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="7" col="AccessionID" visible="false"/>
                    <caption tableid="7" col="AccessionNumber" formatter="HUHAccessioNumber"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
        
        <table id="15" tableid="5" indexed="false" name="Agt2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="5" primary="true">agent.AgentID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="Agent">
                <sql>
                    <![CDATA[SELECT 
  agent.AgentID, 
  agent.LastName, 
  agent.FirstName, 
  attachment.Title, 
  %s 
  FROM agent INNER JOIN agentattachment ON agent.AgentID = agentattachment.AgentID 
  INNER JOIN attachment ON agentattachment.AttachmentID = attachment.AttachmentID 
  WHERE %s
  ]]>
                </sql>
                <captions>
                    <caption tableid="5" col="AgentID" visible="false"/>
                    <caption tableid="5" col="LastName"/>
                    <caption tableid="5" col="FirstName"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
        
       <table id="16" tableid="10" indexed="false" name="CoEv2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="10" primary="true">collectingevent.CollectingEventID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="CollectingEvent">
                <sql>
                    <![CDATA[SELECT 
  collectingevent.CollectingEventID, 
  collectingevent.StationFieldNumber, 
  attachment.Title, 
  %s 
  FROM collectingevent INNER JOIN collectingeventattachment ON collectingevent.CollectingEventID = collectingeventattachment.CollectingEventID 
  INNER JOIN attachment ON collectingeventattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="10" col="CollectingEventID" visible="false"/>
                    <caption tableid="10" col="StationFieldNumber"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
                
       <table id="17" tableid="1" indexed="false" name="Co2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="1" primary="true">collectionobject.CollectionObjectID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="CollectionObject">
                <sql>
                    <![CDATA[SELECT 
  collectionobject.CollectionObjectID, 
  collectionobject.CatalogNumber, 
  attachment.Title, 
  %s 
  FROM collectionobject INNER JOIN collectionobjectattachment ON collectionobject.CollectionObjectID = collectionobjectattachment.CollectionObjectID 
  INNER JOIN attachment ON collectionobjectattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="1" col="collectionobject.CollectionObjectID" visible="false"/>
                    <caption tableid="1" col="collectionobject.CatalogNumber" formatter="CatalogNumber"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
        
       <table id="18" tableid="103" indexed="false" name="ConD2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="103" primary="true">conservdescription.ConservDescriptionID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="ConservDescription">
                <sql>
                    <![CDATA[SELECT 
  conservdescription.ConservDescriptionID, 
  conservdescription.ShortDesc, 
  attachment.Title, 
  %s 
  FROM conservdescription INNER JOIN conservdescriptionattachment ON conservdescription.ConservDescriptionID = conservdescriptionattachment.ConservDescriptionID 
  INNER JOIN attachment ON conservdescriptionattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="103" col="ConservDescriptionID" visible="false"/>
                    <caption tableid="103" col="ShortDesc"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>        
        
    	<table id="19" tableid="73" indexed="false" name="ConE2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="73" primary="true">conservevent.ConservEventID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="ConservEvent">
                <sql>
                    <![CDATA[SELECT 
  conservevent.ConservEventID, 
  conservevent.ExamDate, 
  conservevent.TreatmentCompDate, 
  attachment.Title, 
  %s 
  FROM conservevent INNER JOIN conserveventattachment ON conservevent.ConservEventID = conserveventattachment.ConservEventID 
  INNER JOIN attachment ON conserveventattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="73" col="ConservEventID" visible="false"/>
                    <caption tableid="73" col="ExamDate" formatter="Date"/>
                    <caption tableid="73" col="TreatmentCompDate" formatter="Date"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
        
        <!-- <table id="20" tableid="121" indexed="false" name="DNA2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="121" primary="true">dnasequence.DNASequenceID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="DNASequence">
                <sql>
                    <![CDATA[SELECT 
  dnasequence.DNASequenceID, 
  dnasequence.SeqDate 
  %s 
  FROM dnasequence ]>
                </sql>
                <captions>
                    <caption tableid="121" col="DNASequenceID" visible="false"/>
                    <caption tableid="121" col="GeneName"/>
                    <caption tableid="121" col="SeqDate"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>-->
         
        <table id="21" tableid="83" indexed="false" name="Fbk2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="83" primary="true">fieldnotebook.FieldNotebookID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="FieldNotebook">
                <sql>
                    <![CDATA[SELECT 
  fieldnotebook.FieldNotebookID, 
  fieldnotebook.Name, 
  fieldnotebook.StartDate, 
  fieldnotebook.EndDate, 
  attachment.Title, 
  %s 
  FROM fieldnotebook INNER JOIN fieldnotebookattachment ON fieldnotebook.FieldNotebookID = fieldnotebookattachment.FieldNotebookID 
  INNER JOIN attachment ON fieldnotebookattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="83" col="FieldNotebookID" visible="false"/>
                    <caption tableid="83" col="Name"/>
                    <caption tableid="83" col="StartDate"/>
                    <caption tableid="83" col="EndDate"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
        
        <table id="22" tableid="85" indexed="false" name="FbkPG2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="85" primary="true">fieldnotebookpage.FieldNotebookPageID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="FieldNotebookPage">
                <sql>
                    <![CDATA[SELECT 
  fieldnotebookpage.FieldNotebookPageID, 
  fieldnotebookpage.PageNumber, 
  fieldnotebookpage.ScanDate, 
  attachment.Title, 
  %s 
  FROM fieldnotebookpage INNER JOIN fieldnotebookpageattachment ON fieldnotebookpage.FieldNotebookPageID = fieldnotebookpageattachment.FieldNotebookPageID 
  INNER JOIN attachment ON fieldnotebookpageattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="85" col="FieldNotebookPageID" visible="false"/>
                    <caption tableid="85" col="PageNumber"/>
                    <caption tableid="85" col="ScanDate"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
        
        <table id="23" tableid="84" indexed="false" name="FbkPGS2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="84" primary="true">fieldnotebookpageset.FieldNotebookPageSetID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="FieldNotebookPageSet">
                <sql>
                    <![CDATA[SELECT 
  fieldnotebookpageset.FieldNotebookPageSetID, 
  fieldnotebookpageset.OrderNumber, 
  fieldnotebookpageset.StartDate, 
  fieldnotebookpageset.EndDate, 
  attachment.Title, 
  %s
  FROM fieldnotebookpageset INNER JOIN fieldnotebookpagesetattachment ON fieldnotebookpageset.FieldNotebookPageSetID = fieldnotebookpagesetattachment.FieldNotebookPageSetID 
  INNER JOIN attachment ON fieldnotebookpagesetattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="84" col="FieldNotebookPageSetID" visible="false"/>
                    <caption tableid="84" col="OrderNumber"/>
                    <caption tableid="84" col="StartDate"/>
                    <caption tableid="84" col="EndDate"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
        
        <table id="24" tableid="2" indexed="false" name="Loc2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="2" primary="true">locality.LocalityID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="Locality">
                <sql>
                    <![CDATA[SELECT 
  locality.LocalityID, 
  locality.LocalityName, 
  attachment.Title, 
  %s 
  FROM locality INNER JOIN localityattachment ON locality.LocalityID = localityattachment.LocalityID 
  INNER JOIN attachment ON localityattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="2" col="LocalityID" visible="false"/>
                    <caption tableid="2" col="LocalityName"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
        
        <table id="25" tableid="6" indexed="false" name="Per2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="6" primary="true">permit.PermitID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="Permit">
                <sql>
                    <![CDATA[SELECT 
  permit.PermitID, 
  permit.PermitNumber, 
  permit.IssuedDate, 
  attachment.Title, 
  %s 
  FROM permit INNER JOIN permitattachment ON permit.PermitID = permitattachment.PermitID 
  INNER JOIN attachment ON permitattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="6" col="PermitID" visible="false"/>
                    <caption tableid="6" col="PermitNumber"/>
                    <caption tableid="6" col="IssuedDate"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
        
        <table id="26" tableid="63" indexed="false" name="Prep2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="63" primary="true">preparation.PreparationID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="Preparation">
                <sql>
                    <![CDATA[SELECT 
  preparation.PreparationID, 
  preparation.PreparedDate, 
  attachment.Title, 
  %s 
  FROM preparation INNER JOIN preparationattachment ON preparation.PreparationID = preparationattachment.PreparationID 
  INNER JOIN attachment ON preparationattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="63" col="PreparationID" visible="false"/>
                    <caption tableid="63" col="PreparedDate"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
        
        <table id="27" tableid="70" indexed="false" name="Rep2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="70" primary="true">repositoryagreement.RepositoryAgreementID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="RepositoryAgreement">
                <sql>
                    <![CDATA[SELECT 
  repositoryagreement.RepositoryAgreementID, 
  repositoryagreement.RepositoryAgreementNumber, 
  repositoryagreement.StartDate, 
  attachment.Title, 
  %s 
  FROM repositoryagreement INNER JOIN repositoryagreementattachment ON repositoryagreement.RepositoryAgreementID = repositoryagreementattachment.RepositoryAgreementID 
  INNER JOIN attachment ON repositoryagreementattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="70" col="RepositoryAgreementID" visible="false"/>
                    <caption tableid="70" col="RepositoryAgreementNumber"/>
                    <caption tableid="70" col="StartDate"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
        
        <table id="28" tableid="4" indexed="false" name="Tax2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="4" primary="true">taxon.TaxonID</join>
                <join tableid="41">attachment.AttachmentID</join>
            </joins>
            <detailView icon="Taxon">
                <sql>
                    <![CDATA[SELECT 
  taxon.TaxonID, 
  taxon.FullName, 
  taxon.CommonName, 
  taxon.TaxonomicSerialNumber, 
  attachment.Title, 
  attachment.OrigFilename, 
  %s 
  FROM taxon INNER JOIN taxonattachment ON taxon.TaxonID = taxonattachment.TaxonID 
  INNER JOIN attachment ON taxonattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="4" col="TaxonID" visible="false"/>
                    <caption tableid="4" col="FullName"/>
                    <caption tableid="4" col="CommonName"/>
                    <caption tableid="4" col="TaxonomicSerialNumber"/>                  
                    <caption tableid="41" col="Title"/>
                    <caption tableid="41" col="OrigFilename"/>
                </captions>
            </detailView>
        </table>
        
        <table id="30" tableid="142" indexed="false" name="Frag2ATT" priority="1" color="30, 144, 144">
            <joins>
                <join tableid="142" primary="true">fragment.FragmentID</join>
                <join tableid="143">attachment.AttachmentID</join>
            </joins>
            <detailView icon="Fragment">
                <sql>
                    <![CDATA[SELECT 
  fragment.FragmentID, 
  fragment.Identifier, 
  attachment.Title, 
  %s 
  FROM fragment INNER JOIN fragmentattachment ON fragment.FragmentID = fragmentattachment.FragmentID 
  INNER JOIN attachment ON fragmentattachment.AttachmentID = attachment.AttachmentID WHERE %s]]>
                </sql>
                <captions>
                    <caption tableid="142" col="fragment.FragmentID" visible="false"/>
                    <caption tableid="142" col="fragment.Identifier" formatter="HUHFragmentBarcode"/>
                    <caption tableid="41" col="Title"/>
                </captions>
            </detailView>
        </table>
        
    </express>
    
    <!-- ************************************************* -->
    <!--  These are for Other Non-Express Search Searches  -->
    <!-- ************************************************* -->
    <generic>
        <table id="100" tableid="5" name="AgentSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT ag.AgentID, 
 ag.FirstName, 
 ag.LastName, 
 ag.EMail, 
 ad.Address, 
 ad.City, 
 ad.State, 
 ad.Postalcode, 
 ad.Country 
 FROM agent ag INNER JOIN agent_discipline ON ag.AgentID = agent_discipline.AgentID 
 LEFT JOIN address ad ON ag.AgentID = ad.AgentID 
 WHERE agent_discipline.DisciplineID = DSPLNID AND (%s) GROUP BY ag.AgentID ORDER BY ag.LastName, ag.FirstName]]>
                </sql>
                <captions>
                    <caption tableid="5" col="AgentID" visible="false"/>
                    <caption tableid="5" col="FirstName"/>
                    <caption tableid="5" col="LastName"/>
                    <caption tableid="5" col="EMail"/>
                    <caption tableid="8" col="Address"/>
                    <caption tableid="8" col="City"/>
                    <caption tableid="8" col="State"/>
                    <caption tableid="8" col="Postalcode"/>
                    <caption tableid="8" col="Country"/>
                </captions>
            </detailView>
        </table>
    
        <table id="101" tableid="6" name="PermitSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT permit.PermitID, 
 pr.PermitNumber, 
 ag.LastName, 
 pr.IssuedDate, 
 pr.StartDate, 
 pr.EndDate, 
 pr.RenewalDate, 
 pr.Type 
 FROM permit pr LEFT JOIN agent ag ON pr.IssuedByID = ag.AgentID WHERE (%s) ORDER BY pr.PermitNumber]]>
                </sql>
                <captions>
                    <caption tableid="6" col="PermitID" visible="false"/>
                    <caption tableid="6" col="PermitNumber"/>
                    <caption tableid="5" col="LastName"/>
                    <caption tableid="6" col="IssuedDate"/>
                    <caption tableid="6" col="StartDate"/>
                    <caption tableid="6" col="EndDate"/>
                    <caption tableid="6" col="RenewalDate"/>
                    <caption tableid="6" col="Type"/>
                </captions>
            </detailView>
        </table>
        
        <table id="102" tableid="7" name="AccessionSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT ac.AccessionID, ac.AccessionNumber, ac.Status, ac.Type, ac.DateAccessioned, ac.DateReceived FROM accession ac WHERE (%s) ORDER BY ac.AccessionNumber]]>
                </sql>
                <captions>
                    <caption tableid="7" col="AccessionID" visible="false"/>
                    <caption tableid="7" col="AccessionNumber" formatter="HUHAccessionNumber"/>
                    <caption tableid="7" col="Status"/>
                    <caption tableid="7" col="Type"/>
                    <caption tableid="7" col="DateAccessioned"/>
                    <caption tableid="7" col="DateReceived"/>
                </captions>
            </detailView>
        </table>  
              
        <table id="103" tableid="3" name="GeographySearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT geo.GeographyID, geo.Name, geo.FullName, gtdi.Name FROM geography geo INNER JOIN geographytreedefitem gtdi ON geo.GeographyTreeDefItemID = gtdi.GeographyTreeDefItemID WHERE geo.GeographyTreeDefID = GEOTREEDEFID AND (%s) ORDER BY geo.RankID, geo.Name]]>
                </sql>
                <captions>
                    <caption tableid="3" col="geo.GeographyID" visible="false"/>
                    <caption tableid="3" col="geo.Name"/>
                    <caption tableid="3" col="FullName" name="FullName"/>
                    <caption tableid="3" col="gtdi.Name" key="GeoCategory"/>                    
                </captions>
            </detailView>
        </table> 
        
        
        <table id="104" tableid="65" name="PrepTypeSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[select ppt.PrepTypeID, ppt.Name from preptype ppt where ppt.CollectionMemberID = COLMEMID AND (%s) ORDER BY ppt.Name]]>
                </sql>
                <captions>
                    <caption tableid="65" col="PrepTypeID" visible="false"/>
                    <caption tableid="65" col="Name"/>
                </captions>
            </detailView>
        </table>
        
        <table id="105" tableid="26" name="DisciplineSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT dsp.DisciplineID, dsp.Type, dsp.Name FROM discipline dsp WHERE (%s) ORDER BY dsp.Name]]>
                </sql>
                <captions>
                    <caption tableid="26" col="DisciplineID" visible="false"/>
                    <caption tableid="26" col="Type"/>
                    <caption tableid="26" col="Name"/>
                </captions>
            </detailView>
        </table>  
              
        <table id="106" tableid="97" name="CatalogNumberingSchemeSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT CatalogNumberingSchemeID, SchemeName, IsNumericOnly FROM catalognumberingscheme WHERE (%s) ORDER BY SchemeName]]>
                </sql>
                <captions>
                    <caption tableid="97" col="CatalogNumberingSchemeID" visible="false"/>
                    <caption tableid="97" col="SchemeName"/>
                    <caption tableid="97" col="IsNumericOnly"/>
                </captions>
            </detailView>
        </table>  
       
        <table id="107" tableid="4" name="TaxonSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT tx.TaxonID, tx.RankID, tx.FullName, tx.Author, tx.GroupNumber FROM taxon tx WHERE tx.TaxonTreeDefID = TAXTREEDEFID AND (%s) ORDER BY tx.RankID, tx.Name]]>
                </sql>
                <captions>
                    <caption tableid="4" col="taxon.TaxonID" visible="false"/>
                    <caption tableid="4" col="taxon.RankID" visible="false"/>
                    <caption tableid="4" col="taxon.FullName"/>
                    <caption tableid="4" col="taxon.Author"/>
                    <caption tableid="4" col="taxon.GroupNumber"/>
                </captions>
            </detailView>
        </table>
        
        <table id="108" tableid="5" name="AgentNameSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT ag.AgentID, ag.FirstName, ag.LastName, ag.MiddleInitial FROM agent ag WHERE ag.CollectionMemberID = COLMEMID AND (%s) ORDER BY ag.LastName, ag.FirstName, ag.MiddleInitial]]>
                </sql>
                <captions>
                    <caption tableid="5" col="AgentID" visible="false"/>
                    <caption tableid="5" col="FirstName"/>
                    <caption tableid="5" col="LastName"/>
                    <caption tableid="5" col="MiddleInitial"/>
                </captions>
            </detailView>
        </table>
        
        <table id="109" tableid="58" name="StorageSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT lcn.StorageID, lcn.FullName, lcn.Text1, lcn.Text2 FROM storage lcn  WHERE lcn.StorageTreeDefID = STORTREEDEFID AND (%s) ORDER BY lcn.FullName]]>
                </sql>
                <captions>
                    <caption tableid="58" col="StorageID" visible="false"/>
                    <caption tableid="58" col="FullName" key="StorageName"/>
                    <caption tableid="58" col="Text1"/>
                    <caption tableid="58" col="Text2"/>
                </captions>
            </detailView>
        </table>
        
        <table id="110" tableid="46" name="ChronosStratSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT gtp.GeologicTimePeriodID, gtp.FullName FROM geologictimeperiod gtp WHERE gtp.GeologicTimePeriodTreeDefID = GTPTREEDEFID AND (%s) ORDER BY gtp.FullName]]>
                </sql>
                <captions>
                    <caption tableid="46" col="GeologicTimePeriodID" visible="false"/>
                    <caption tableid="46" col="FullName" key="Name"/>
                </captions>
            </detailView>
        </table>
        
        <table id="111" tableid="100" name="LithoStratSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT ls.LithoStratID, ls.FullName FROM lithostrat ls WHERE ls.LithoStratTreeDefID = LITHOTREEDEFID AND (%s) ORDER BY ls.FullName]]>
                </sql>
                <captions>
                    <caption tableid="100" col="LithoStratID" visible="false"/>
                    <caption tableid="100" col="FullName" key="Name"/>
                </captions>
            </detailView>
        </table>
        
        <table id="112" tableid="32" name="PaleoContextSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT pc.PaleoContextID, pc.TopDistance, pc.DistanceUnits FROM paleocontext pc WHERE pc.CollectionMemberID = COLMEMID AND (%s) ORDER BY pc.TopDistance]]>
                </sql>
                <captions>
                    <caption tableid="32" col="PaleoContextID" visible="false"/>
                    <caption tableid="32" col="TopDistance"/>
                    <caption tableid="32" col="DistanceUnits"/>
                </captions>
            </detailView>
        </table>
        
        <table id="113" tableid="52" name="OpenLoans" priority="1" color="30, 144, 255">
            <detailView icon="Loan">
                <sql>
                    <![CDATA[SELECT DISTINCT ln.LoanID, ln.LoanNumber, ln.LoanDate, ln.CurrentDueDate, ln.OriginalDueDate FROM loan ln INNER JOIN loanpreparation lpo ON ln.LoanID = lpo.LoanID
 INNER JOIN preparation pp ON lpo.PreparationID = pp.PreparationID 
 INNER JOIN fragment frag ON pp.PreparationID = frag.FragmentID 
 INNER JOIN collectionobject co ON frag.CollectionObjectID = co.CollectionObjectID 
 INNER JOIN collection col ON co.CollectionID = col.CollectionID 
 INNER JOIN specifyuser spu ON collectiontype.SpecifyUserID = spu.SpecifyUserID 
 WHERE spu.SpecifyUserID = SPECIFYUSERID AND ln.DisciplineID = DSPLNID AND 
 (not (ln.CurrentDueDate is null)) AND (ln.IsClosed = false or ln.IsClosed is null) AND 
                    datediff(CURDATE(), ln.CurrentDueDate) > 0 ORDER BY ln.LoanDate]]>
                </sql>
                <captions>
                    <caption tableid="52" col="ln.LoanID" visible="false"/>
                    <caption tableid="52" col="LoanNumber"/>
                    <caption tableid="52" col="LoanDate"/>
                    <caption tableid="52" col="CurrentDueDate"/>
                    <caption tableid="52" col="OriginalDueDate"/>
                </captions>
            </detailView>
        </table>
        
        <table id="114" tableid="2" name="LocalitySearch" priority="1" color="30, 144, 255">
            <detailView icon="Locality">
                <sql>
                    <![CDATA[SELECT loc.LocalityID, loc.LocalityName, loc.Latitude1, loc.Longitude1 FROM locality loc WHERE loc.DisciplineID = DSPLNID AND (%s) ORDER BY loc.LocalityName]]>
                </sql>
                <captions>
                    <caption tableid="2" col="LocalityID" visible="false"/>
                    <caption tableid="2" col="LocalityName"/>
                    <caption tableid="2" col="Latitude1"/>
                    <caption tableid="2" col="Longitude1"/>
                </captions>
            </detailView>
        </table>
        
        <table id="115" tableid="41" name="AttachmentSearch" priority="1" color="30, 144, 255">
            <detailView icon="Attachment">
                <sql>
                    <![CDATA[SELECT att.AttachmentID, att.OrigFilename FROM attachment att WHERE (%s) ORDER BY att.OrigFilename]]>
                </sql>
                <captions>
                    <caption tableid="41" col="AttachmentID" visible="false"/>
                    <caption tableid="41" col="OrigFilename"/>
                </captions>
            </detailView>
        </table>
        
        <table id="116" tableid="1" name="CollectionObjectSearch" priority="1" color="30, 144, 255">
            <detailView icon="CollectionObject">
                <sql>
                    <![CDATA[SELECT co.CollectionObjectID, av.Name, co.FieldNumber, ce.StartDate, ce.StartDatePrecision
                               FROM collectionobject co LEFT JOIN collectingevent ce ON co.CollectingEventID=ce.CollectingEventID
                               LEFT JOIN collector ctr ON ce.CollectingEventID=ctr.CollectingEventID
                               JOIN agentvariant av ON (ctr.AgentID=av.AgentID AND av.VarType=4)
                              WHERE co.CollectionMemberID = COLMEMID AND (%s) ORDER BY av.Name, co.FieldNumber, ce.StartDate]]>
                </sql>
                <captions>
                    <caption tableid="1" col="co.CollectionObjectID" visible="false"/>
					<caption tableid="107">
						<col name="VariantName" field="name"/>
					</caption>
					<caption tableid="1" col="FieldNumber"/>
                    <caption tableid="10" formatter="PartialDate">
                        <col name="StartDate"          field="startDate"/>
                        <col name="StartDatePrecision" field="startDatePrecision"/>
                    </caption>
                </captions>
            </detailView>
        </table>
        
        <table id="117" tableid="10" name="CollectingEventSearch" priority="1" color="30, 144, 255">
            <detailView icon="CollectionObject">
                <sql>
                    <![CDATA[SELECT ce.CollectingEventID, ce.StationFieldNumber, ce.StartDate, ce.StartDatePrecision FROM collectingevent ce WHERE ce.DisciplineID = DSPLNID AND (%s)]]>
                </sql>
                <captions>
                    <caption tableid="10" col="CollectingEventID" visible="false"/>
                    <caption tableid="10" col="StationFieldNumber"/>
                    <caption tableid="10" formatter="PartialDate">
                        <col name="StartDate"          field="startDate"/>
                        <col name="StartDatePrecision" field="startDatePrecision"/>
                    </caption>
                </captions>
            </detailView>
        </table>
        
        <table id="118" tableid="46" name="BioStratSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT gtp.GeologicTimePeriodID, gtp.FullName FROM geologictimeperiod gtp WHERE gtp.GeologicTimePeriodTreeDefID = GTPTREEDEFID AND gtp.IsBioStrat = 1 AND (%s) ORDER BY gtp.Name]]>
                </sql>
                <captions>
                    <caption tableid="46" col="GeologicTimePeriodID" visible="false"/>
                    <caption tableid="46" col="FullName" key="Name"/>
                </captions>
            </detailView>
        </table>

        
        <table id="119" tableid="51" name="JournalSearch" priority="1" color="30, 144, 255">
            <detailView icon="Journal">
                <sql>
                    <![CDATA[SELECT jn.JournalID, jn.JournalName, jn.JournalAbbreviation, jn.ISSN, jn.GUID FROM journal jn WHERE (%s) ORDER BY jn.JournalAbbreviation]]>
                </sql>
                <captions>
                    <caption tableid="51" col="JournalID" visible="false"/>
                    <caption tableid="51" col="JournalName"/>
                    <caption tableid="51" col="JournalAbbreviation"/>
                    <caption tableid="51" col="ISSN"/>
                    <caption tableid="51" col="GUID"/>
                </captions>
            </detailView>
        </table>

        <table id="120" tableid="67" name="AppraisalSearch" priority="1" color="30, 144, 255">
            <detailView icon="Appraisal">
                <sql>
                    <![CDATA[SELECT aps.AppraisalID, aps.AppraisalNumber FROM appraisal aps WHERE (%s) ORDER BY aps.AppraisalNumber]]>
                </sql>
                <captions>
                    <caption tableid="67" col="AppraisalID" visible="false"/>
                    <caption tableid="67" col="AppraisalNumber"/>
                </captions>
            </detailView>
        </table>
        
        <table id="121" tableid="69" name="ReferenceWorkSearch" priority="1" color="30, 144, 255">
            <detailView icon="ReferenceWork">
                <sql>
                    <![CDATA[SELECT rw.ReferenceWorkID, rw.Text1, rw.Title, av.Name, rw.Text2, rwv.Name, rwi.Type, rwi.Identifier
                               FROM referencework rw LEFT JOIN referenceworkvariant rwv ON rwv.ReferenceWorkID=rw.ReferenceWorkID LEFT JOIN
                                    referenceworkidentifier rwi ON rwi.ReferenceWorkID=rw.ReferenceWorkID LEFT JOIN
                                    author au ON (au.ReferenceWorkID=rw.ReferenceWorkID AND au.OrderNumber=1) LEFT JOIN
                                    agent ag ON ag.AgentID=au.AgentID LEFT JOIN
                                    agentvariant av on (ag.AgentID=av.AgentID AND av.VarType=2)
                                    WHERE (%s) ORDER BY rw.ReferenceWorkID, rwi.ReferenceWorkIdentifierID, rwi.Type, rwv.ReferenceWorkVariantID]]>
                </sql>
                <captions>
                    <caption tableid="69"  col="ReferenceWorkID" visible="false"/>
                    <caption tableid="69"  col="Text1"       name="rw.Text1" field="text1"/>
                    <caption tableid="69"  col="Title"       name="rw.Title" field="title"/>
                    <caption tableid="107" col="av.Name"     name="av.Name" field="name"/>
                    <caption tableid="69"  col="Text2"    name="rw.Text2" field="text2"/>
                    <caption tableid="141" key="ReferenceWorkVariant">
                    	<agg class="edu.ku.brc.specify.datamodel.ReferenceWorkVariant" aggregator="ReferenceWorkVariant"/>
                    	<col name="rwv.Name" field="name"/>
                    </caption>
                    <caption tableid="140" key="ReferenceWorkIdentifier">
                    	<agg class="edu.ku.brc.specify.datamodel.ReferenceWorkIdentifier" aggregator="ReferenceWorkIdentifier"/>
						<col name="rwi.Type" field="type"/>
                    	<col name="rwi.Identifier" field="identifier"/>
                    </caption>
                </captions>
            </detailView>
        </table>
        
        <table id="122" tableid="87" name="CollectingTripSearch" priority="1" color="30, 144, 255">
            <detailView icon="CollectingTrip">
                <sql>
                    <![CDATA[SELECT clt.CollectingTripID, clt.CollectingTripName, clt.StartDate FROM collectingtrip clt WHERE clt.DisciplineID = DSPLNID AND (%s) ORDER BY clt.CollectingTripName]]>
                </sql>
                <captions>
                    <caption tableid="87" col="CollectingTripID" visible="false"/>
                    <caption tableid="87" col="CollectingTripName"/>
                    <caption tableid="87" col="StartDate" formatter="Date"/>
                </captions>
            </detailView>
        </table>
        
        <table id="123" tableid="96" name="DivisionSearch" priority="1" color="30, 144, 255">
            <detailView icon="Division">
                <sql>
                    <![CDATA[SELECT dv.DivisionID, dv.Name FROM division dv WHERE dv.DisciplineID = DSPLNID AND (%s) ORDER BY dv.Name]]>
                </sql>
                <captions>
                    <caption tableid="96" col="DivisionID" visible="false"/>
                    <caption tableid="96" col="Name"/>
                </captions>
            </detailView>
        </table>
        
        <table id="124" tableid="66" name="ProjectSearch" priority="1" color="30, 144, 255">
            <detailView icon="Project">
                <sql>
                    <![CDATA[SELECT prj.ProjectID, prj.ProjectName, prj.ProjectNumber FROM project prj WHERE prj.CollectionMemberID = COLMEMID AND (%s) ORDER BY prj.ProjectName]]>
                </sql>
                <captions>
                    <caption tableid="66" col="ProjectID" visible="false"/>
                    <caption tableid="66" col="ProjectName"/>
                    <caption tableid="66" col="ProjectNumber"/>
                </captions>
            </detailView>
        </table>
        
        <table id="125" tableid="70" name="RepositoryAgreementSearch" priority="1" color="30, 144, 255">
            <detailView icon="RepositoryAgreement">
                <sql>
                    <![CDATA[SELECT ra.RepositoryAgreementID, ra.RepositoryAgreementNumber, ra.StartDate FROM repositoryagreement ra WHERE ra.DisciplineID = DSPLNID AND (%s) ORDER BY ra.RepositoryAgreementNumber]]>
                </sql>
                <captions>
                    <caption tableid="70" col="ProjectID" visible="false"/>
                    <caption tableid="70" col="RepositoryAgreementNumber"/>
                    <caption tableid="70" col="StartDate"/>
                </captions>
            </detailView>
        </table>
        
        <table id="127" tableid="31" name="ContainerSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[select con.ContainerID, con.Name from container con where con.CollectionMemberID = COLMEMID AND (%s) ORDER BY con.Name]]>
                </sql>
                <captions>
                    <caption tableid="31" col="ContainerID" visible="false"/>
                    <caption tableid="31" col="Name"/>
                </captions>
            </detailView>
        </table>
        
        <table id="128" tableid="5" name="OrganizationSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT distinct ag.AgentID, 
 ag.LastName, 
 ag.Abbreviation, 
 ad.Address, 
 ad.City, 
 ad.State, 
 ad.Postalcode, 
 ad.Country 
 FROM agent ag INNER JOIN agent_discipline ON ag.AgentID = agent_discipline.AgentID 
 LEFT JOIN address ad ON (ag.AgentID = ad.AgentID AND ad.Ordinal=1)
 WHERE agent_discipline.DisciplineID = DSPLNID AND (%s) GROUP BY ag.AgentID ORDER BY ag.Abbreviation, ag.LastName, ag.FirstName]]>
                </sql>
                <captions>
                    <caption tableid="5" col="AgentID" visible="false"/>
                    <caption tableid="5" col="LastName"/>
                    <caption tableid="5" col="Abbreviation"/>
                    <caption tableid="8" col="Address"/>
                    <caption tableid="8" col="City"/>
                    <caption tableid="8" col="State"/>
                    <caption tableid="8" col="Postalcode"/>
                    <caption tableid="8" col="Country"/>
                </captions>
            </detailView>
        </table>
        
        <table id="129" tableid="63" name="PreparationSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT pp.PreparationID,
                                    pp.Identifier as PrepIdentifier,
                                    ppt.Name,
                                    pp.SampleNumber,
                                    pp.Text1,
                                    frag.Identifier as FragIdentifier
                               FROM preparation pp JOIN preptype ppt ON pp.PrepTypeID=ppt.PrepTypeID LEFT JOIN fragment frag on pp.PreparationID=frag.PreparationID
                              WHERE pp.CollectionMemberID = COLMEMID AND (%s) ORDER BY pp.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="63" col="PreparationID" visible="false"/>
                    <caption tableid="63" name="Identifier" col="preparation.Identifier" formatter="HUHPreparationBarcode"/>
                    <caption tableid="65" name="Name" col="prepType.Name"/>
                    <caption tableid="63" name="SampleNumber" col="preparation.SampleNumber"/>
                    <caption tableid="63" name="Text1" col="preparation.Text1"/>
                    <caption tableid="142" name="Identifier" col="fragment.Identifier" formatter="HUHFragmentBarcode"/>
                </captions>
            </detailView>
        </table>
        
        <table id="130" tableid="5" name="BotanistSearch" priority="1" color="30, 144, 255">
            <detailView icon="Agent">
                <sql>
                    <![CDATA[
 SELECT
 ag.AgentID,
 av.Name,
 ag.DateOfBirth,
 ag.DateOfBirthPrecision,
 ag.DateOfDeath,
 ag.DateOfDeathPrecision,
 ag.DatesType,
 agsp.SpecialtyName,
 %s 
 FROM agent ag INNER JOIN agent_discipline ON ag.AgentID = agent_discipline.AgentID
 JOIN agentvariant av ON ag.AgentID = av.AgentID
 LEFT JOIN agentspecialty agsp ON ag.AgentID = agsp.AgentID
 WHERE %s
 ORDER BY ag.AgentID, av.Name, agsp.Role, agsp.OrderNumber]]>
                </sql>
                <captions>
                    <caption tableid="5" col="ag.AgentID" visible="false"/>
                    <caption tableid="107" key="Author/Collector">
                    	<agg class="edu.ku.brc.specify.datamodel.AgentVariant" aggregator="AgentVariant"/>
                    	<col name="av.Name" field="name"/>
                    </caption>
    				<caption tableid="5" formatter="PartialDate">
    					<col name="ag.DateOfBirth" field="dateOfBirth"/>
                    	<col name="ag.DateOfBirthPrecision" field="dateOfBirthPrecision"/>
                    </caption>
                    <caption tableid="5" formatter="PartialDate">
    					<col name="ag.DateOfDeath" field="dateOfDeath"/>
                    	<col name="ag.DateOfDeathPrecision" field="dateOfDeathPrecision"/>
                    </caption>
                    <caption tableid="5" col="ag.DatesType" field="datesType" formatter="AgentDatesType"/>
                    <caption tableid="86" key="AgentSpecialties">
                    	<agg class="edu.ku.brc.specify.datamodel.AgentSpecialty" aggregator="AgentSpecialty"/>
                    	<col name="agsp.SpecialtyName" field="specialtyName"/>
                    </caption>
                </captions>
            </detailView>
        </table>
        
        <table id="131" tableid="85" indexed="false" name="FieldNotebookPageSearch" priority="1" color="30, 144, 144">
            <detailView icon="FieldNotebookPage">
                <sql>
                    <![CDATA[SELECT fnbp.FieldNotebookPageID, PageNumber, ScanDate, fnps.StartDate, fnps.EndDate, fn.Name, fn.StartDate FROM fieldnotebookpage AS fnbp
 Inner Join fieldnotebookpageset AS fnps ON fnbp.FieldNotebookPageSetID = fnps.FieldNotebookPageSetID
 Inner Join fieldnotebook AS fn ON fnps.FieldNotebookID = fn.FieldNotebookID WHERE fnbp.DisciplineID = DSPLNID AND (%s)]]>
                </sql>
                <captions>
                    <caption tableid="85" col="fnbp.FieldNotebookPageID" visible="false"/>
                    <caption tableid="85" col="PageNumber"/>
                    <caption tableid="85" col="ScanDate"/>
                    <caption tableid="84" col="fnps.StartDate"/>
                    <caption tableid="84" col="fnps.EndDate"/>
                    <caption tableid="83" col="fn.Name"/>
                    <caption tableid="83" col="fn.StartDate"/>
                </captions>
            </detailView>
        </table>
        
        <table id="132" tableid="63" indexed="false" name="BatchPrepSearch" priority="1" color="30, 144, 144">
            <detailView icon="Preparation">
                <sql>
                    <![CDATA[SELECT pp.PreparationID,
                                    pp.Identifier as PrepIdentifier,
                                    ac.AccessionNumber,
                                    exo.ExchangeNumber,
                                    gf.GiftNumber,
                                    ln.LoanNumber,
                                    t1.FullName,
                                    geo.FullName,
                                    t2.FullName
                               FROM preparation pp LEFT JOIN accessionpreparation ap ON pp.PreparationID=ap.PreparationID
                               					   LEFT JOIN accession ac ON ap.AccessionID=ac.AccessionID
                               					   LEFT JOIN exchangeoutpreparation eop ON pp.PreparationID=eop.PreparationID
                               					   LEFT JOIN exchangeout exo ON eop.ExchangeOutID=eo.ExchangeOutID
                               					   LEFT JOIN giftpreparation gf ON pp.PreparationID=gf.PreparationID
                               					   LEFT JOIN gift gf ON gfp.GiftID=gf.GiftID
                               					   LEFT JOIN loanpreparation lpo ON pp.PreparationID=lpo.PreparationID
                               					   LEFT JOIN loan ln ON lpo.LoanID=ln.LoanID
                               					   LEFT JOIN taxon tx ON (tx.TaxonID=pp.TaxonID)
                                                   LEFT JOIN geography geo ON (geo.GeographyID=pp.GeographyID)
                              WHERE pp.CollectionMemberID = COLMEMID AND (%s) ORDER BY ac.AccessionNumber, eo.ExchangeNumber, gf.GiftNumber, ln.LoanNumber, tx.FullName, geo.FullName]]>
                </sql>
                <captions>
                    <caption tableid="63"  col="pp.PreparationID" visible="false"/>
                    <caption tableid="63"  col="pp.Identifier" name="pp.Identifier" formatter="HUHPreparationBarcode"/>
                    <caption tableid="7"   col="ac.AccessionNumber" formatter="HUHAccessionNumber"/>
                    <caption tableid="40"  col="exo.ExchangeNumber" formatter="HUHExchangeNumber"/>
                    <caption tableid="131" col="gf.GiftNumber" formatter="HUHGiftNumber"/>
                    <caption tableid="52"  col="ln.LoanNumber" formatter="HUHLoanNumber"/>
                    <caption tableid="4"   col="tx.FullName"/>
                    <caption tableid="3"   col="geo.FullName"/>
                </captions>
            </detailView>
        </table>
        
        <table id="133" tableid="142" name="FragmentSearch" priority="1" color="30, 144, 255">
            <detailView icon="">
                <sql>
                    <![CDATA[SELECT frag.FragmentID,
                                    frag.Identifier as FragIdentifier,
                                    frag.Description as FragDescription,
                                    ppt.Name,
                                    pp.Identifier as PrepIdentifier,
                                    pp.Description as PrepDescription
                               FROM fragment frag LEFT JOIN preparation pp ON frag.PreparationID=pp.PreparationID LEFT JOIN preptype ppt ON pp.PrepTypeID=ppt.PrepTypeID
                              WHERE frag.CollectionMemberID = COLMEMID AND (%s) ORDER BY pp.Identifier, frag.Identifier]]>
                </sql>
                <captions>
                    <caption tableid="142" col="FragmentID" visible="false"/>
                    <caption tableid="142" name="Identifier"  col="frag.Identifier"  field="identifier" formatter="HUHFragmentBarcode"/>
                    <caption tableid="142" name="Description" col="frag.Description" field="description"/>
                    <caption tableid="65"  name="Name"        col="ppt.Name"         field="name"/>
                    <caption tableid="63"  name="Identifier"  col="pp.Identifier"    field="identifier" formatter="HUHPreparationBarcode"/>
                    <caption tableid="63"  name="Description" col="pp.Description"   field="description"/>
                </captions>
            </detailView>
        </table>
        
        <table id="134" tableid="69" name="ExsiccataSearch" priority="1" color="30, 144, 255">
            <detailView icon="ReferenceWork">
                <sql>
                    <![CDATA[SELECT rw.ReferenceWorkID, rw.ReferenceWorkType, rw.Text1, ag.LastName, rw.WorkDate, rwv.Name, rwi.Identifier
                               FROM referencework rw LEFT JOIN referenceworkvariant rwv on rwv.ReferenceWorkID=rw.ReferenceWorkID LEFT JOIN
                                    referenceworkidentifier rwi on rwi.ReferenceWorkID=rw.ReferenceWorkID LEFT JOIN
                                    author au on au.ReferenceWorkID=rw.ReferenceWorkID LEFT JOIN
                                    agent ag on ag.AgentID=au.AgentID WHERE rw.ReferenceWorkType=6 AND (%s) ORDER BY rw.Text1]]>
                </sql>
                <captions>
                    <caption tableid="69" col="ReferenceWorkID" visible="false"/>
                    <caption tableid="69" col="Text1"/>
                    <caption tableid="5" col="LastName"/>
                    <caption tableid="69" col="WorkDate"/>
                    <caption tableid="141" col="Name"/>
                    <caption tableid="140" col="Identifier"/>
                </captions>
            </detailView>
        </table>
        
    </generic>
</searches>
